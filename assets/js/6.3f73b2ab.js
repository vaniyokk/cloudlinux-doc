(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{195:function(e,t,s){"use strict";s.r(t);var a=s(0),i=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("p",[e._v("CageFS is a virtualized file system and a set of tools to contain each user in its own 'cage'. Each customer will have its own fully functional CageFS, with all the system files, tools, etc.")]),e._v(" "),s("p",[e._v("The benefits of CageFS are:")]),e._v(" "),s("p",[e._v("·        Only safe binaries are available to user\n·        User will not see any other users, and would have no way to detect presence of other users & their user names on the server\n·        User will not be able to see server configuration files, such as Apache config files.\n·        User's will have limited view of /proc file system, and will not be able to see other' users processes")]),e._v(" "),s("p",[e._v("At the same time, user's environment will be fully functional, and user should not feel in any way restricted. No adjustments to user's scripts are needed. CageFS will cage any scripts execution done via:")]),e._v(" "),s("p",[e._v("·        Apache (suexec, suPHP, mod_fcgid, mod_fastcgi)\n·        LiteSpeed Web Server\n·        Cron Jobs\n·        SSH\n·        Any other enabled service")]),e._v(" "),e._m(1),e._v(" "),s("p",[e._v("Minimum Requirements:")]),e._v(" "),s("p",[e._v("·        kernel: CL5 with lve0.8.54 or later, CL6 with lve1.2.17.1 or later, CL7.\n·        7GB of disk space.")]),e._v(" "),s("p",[e._v("Depending on your setup, and number of users, you might also need:\nUp to 8MB per customer in /var directory (to store custom /etc directory)\n5GB to 20GB in /usr/share directory (to store safe skeleton of a filesystem)")]),e._v(" "),s("p",[e._v("To install CageFS:")]),e._v(" "),e._m(2),s("p",[e._v("That last command will create skeleton directory that might be around 7GB in size. If you don't have enough disk space in /usr/share, use following commands to have cagefs-skeleton being placed in a different location:")]),e._v(" "),e._m(3),s("p",[e._v('On cPanel servers, if you will be placing skeleton into /home directory, you must configure the following option in:\ncPanel WHM -> Server Configuration -> Basic cPanel/WHM Setup -> Basic Config -> Additional home directories\nChange the value to blank  (not default "home")\nWithout changing this option, cPanel will create new accounts in incorrect places.')]),e._v(" "),s("p",[e._v("CageFS will automatically detect and configure all necessary files for:\n·        cPanel\n·        Plesk\n·        DirectAdmin\n·        ISPmanager\n·        Interworx\n·        MySQL\n·        PostgreSQL\n·        LiteSpeed")]),e._v(" "),s("p",[e._v("Web interface to manage CageFS is available for cPanel, Plesk 10+, DirectAdmin, ISPmanager & Interworx. Command line tool would need to be used for other control panels.")]),e._v(" "),s("p",[e._v("Once you initialized the template you can start enabling users. By default CageFS is disabled for all users.")]),e._v(" "),s("p",[e._v("When installing/upgrading, the fs.proc_can_see_other_uid parameter is set to 0 if it is available in /etc/sysctl.conf, but then it will be written to /etc/sysctl.d/90-cloudlinux.conf.\nWe recommend set fs.proc_can_see_other_uid=0 to activate protection with hidepid option.")]),e._v(" "),e._m(4),e._v(" "),s("p",[e._v("To uninstall CageFS, start by disabling and removing all directories:")]),e._v(" "),e._m(5),s("p",[e._v("That command will: Disable CageFS for all customers, unmount CageFS for all users, removes directories. It will not remove /etc/cagefs directory.")]),e._v(" "),s("p",[e._v("Remove CageFS RPM:")]),e._v(" "),e._m(6),e._m(7),e._v(" "),s("p",[e._v("CageFS provides for two modes of operations:")]),e._v(" "),e._m(8),e._v(" "),s("p",[e._v("Mode #1 is convenient for production operation, where you want all new users to automatically be added to CageFS.\nMode #2 is convenient while you test CageFS, as it allows you to enable it on one by one for your customers.")]),e._v(" "),s("p",[e._v("To start using CageFS you have to select one of the mode of operations:")]),e._v(" "),e._m(9),s("p",[e._v("or")]),e._v(" "),e._m(10),s("p",[e._v("or")]),e._v(" "),e._m(11),s("p",[e._v("That will switch the operation mode, preserving current disabled/enabled users.")]),e._v(" "),s("p",[e._v("To enable individual user do:")]),e._v(" "),e._m(12),s("p",[e._v("To disable individual user:")]),e._v(" "),e._m(13),s("p",[e._v("To  list all enabled users:")]),e._v(" "),e._m(14),s("p",[e._v("To list all disabled users:")]),e._v(" "),e._m(15),s("p",[e._v("To see current mode of operation:")]),e._v(" "),e._m(16),e._m(17),e._v(" "),s("p",[e._v("_cagefsctl _ is used to manage CageFS. It allows initializing and updating CageFS, as well as enabling/disabling CageFS for individual users.")]),e._v(" "),s("p",[e._v("Use the following syntax to manage CageFS:")]),e._v(" "),s("p",[e._v("Use the following syntax to manage users:")]),e._v(" "),s("p",[e._v("Common options:")]),e._v(" "),e._m(18),e._v(" "),s("p",[e._v("Sometimes you will need to execute a command as user inside CageFS.")]),e._v(" "),s("p",[e._v("If a user has shell enabled - you can simply use:")]),e._v(" "),e._m(19),s("p",[e._v("Yet, if user has shell disabled, it wouldn't work. To solve this issue, we have added command:")]),e._v(" "),e._m(20),s("p",[e._v("If you disable CageFS for a user,  then will be executed without .")]),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),e._m(23),e._v(" "),s("p",[e._v("CageFS utility allows to check CageFS configuration consistency, so that an administrator can save the time investigating issues with CageFS and ensure that custom configuration is correct.")]),e._v(" "),s("p",[e._v("To start run the command:")]),e._v(" "),e._m(24),s("p",[e._v("At the moment 7 types of check are implemented:")]),e._v(" "),s("p",[s("em",[e._v("Check cagefs mount points exists")]),e._v(" - reads file and verifies if the directories specified in it really exist on the disk. To learn more visit "),s("a",{attrs:{href:"https://docs.cloudlinux.com/index.html?mount_points.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.cloudlinux.com/index.html?mount_points.html"),s("OutboundLink")],1),e._v(" and "),s("a",{attrs:{href:"https://docs.cloudlinux.com/index.html?split_by_username.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.cloudlinux.com/index.html?split_by_username.html"),s("OutboundLink")],1)]),e._v(" "),e._m(25),e._v(" "),e._m(26),e._v(" "),e._m(27),e._v(" "),e._m(28),e._v(" "),e._m(29),e._v(" "),s("p",[s("em",[e._v("Check cagefs proxy commands configs are parsable")]),e._v(" - tries to load files and parse them to check the syntax. In case of any parsing error the test will fail. To learn more visit "),s("a",{attrs:{href:"https://docs.cloudlinux.com/index.html?executing_by_proxy.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.cloudlinux.com/index.html?executing_by_proxy.html"),s("OutboundLink")],1),e._v(" .")]),e._v(" "),s("p",[s("em",[e._v("Check cagefs virt.mp files syntax")]),e._v(" - reads all files (if any) and checks their syntax validity. At the moment there are only two checks of the syntax: the file is not empty if it exists, and the file is not starting with the sub directory definitions (with @). To learn more visit "),s("a",{attrs:{href:"https://docs.cloudlinux.com/index.html?per_user_virtual_mount_points.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.cloudlinux.com/index.html?per_user_virtual_mount_points.html"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("Possible results of the checks:")]),e._v(" "),e._m(30),e._v(" "),s("p",[e._v("In case if at least one of the checks resulted neither nor then the checker will end with ret code >0.")]),e._v(" "),e._m(31),e._v(" "),s("p",[e._v("Due to the nature of CageFS, some options will not work as before or will require some changes:")]),e._v(" "),s("p",[e._v("lastlog will not work ( "),s("em",[e._v("/var/log/lastlog")]),e._v(" ).\nPHP will load php.ini from "),s("em",[e._v("/usr/selector/php.ini.")]),e._v(" That file is actually a link to a real php.ini file from your system. So the same php.ini will be loaded in the end.\nYou have to run "),s("code",[e._v("cagefsctl --update")]),e._v(" any time you have modified php.ini, or you want to get new/updated software inside CageFS.\nCageFS installation changes jailshell to regular bash on cPanel - "),s("a",{attrs:{href:"http://kb.cloudlinux.com/2015/11/why-cagefs-installation-change-jailshell-to-regular-bash-on-cpanel/",target:"_blank",rel:"noopener noreferrer"}},[e._v("read why"),s("OutboundLink")],1),e._v(" .")]),e._v(" "),e._m(32),e._v(" "),s("p",[s("router-link",{attrs:{to:"/file_system_templates/"}},[e._v("File System Templates")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/excluding_files/"}},[e._v("Excluding Files")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/excluding_users/"}},[e._v("Excluding Users")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/mount_points/"}},[e._v("Mount Points")])],1),e._v(" "),s("p",[s("code",[e._v("o")]),e._v(" "),s("router-link",{attrs:{to:"/per_user_virtual_mount_points/"}},[e._v("Per user virtual mount points")])],1),e._v(" "),s("p",[s("code",[e._v("o")]),e._v(" "),s("router-link",{attrs:{to:"/split_by_username/"}},[e._v("Split by Username")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/base_home_directory/"}},[e._v("Base Home Directory")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/postgresql_support/"}},[e._v("PostgreSQL support")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/pam_configuration/"}},[e._v("PAM Configuration")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/executing_by_proxy/"}},[e._v("Executing By Proxy")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/custom__etc_directory/"}},[e._v("Custom /etc directory")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/moving_cagefs-skeleton_directory/"}},[e._v("Moving cagefs-skeleton directory")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/moving__var_cagefs_directory/"}},[e._v("Moving /var/cagefs directory")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/tmp_directories/"}},[e._v("TMP directories")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/syslog/"}},[e._v("Syslog")])],1),e._v(" "),s("p",[s("router-link",{attrs:{to:"/excluding_mount_points/"}},[e._v("Excluding mount points")])],1),e._v(" "),e._m(33),e._v(" "),s("p",[e._v("CageFS creates a filesystem template in directory. CageFS template will be mounted for each customer.  The template is created by running:")]),e._v(" "),e._m(34),s("p",[e._v("To update the template, you should run:")]),e._v(" "),e._m(35),s("p",[e._v("The behavior of the commands (and the files copied into directory) depends on the configuration files in /etc/cagefs/conf.d\nYou can add additional files, users, groups and devices into CageFS template by adding .cfg file, and running:")]),e._v(" "),e._m(36),s("p",[e._v("To delete files from CageFS template, remove corresponding .cfg file, and run:")]),e._v(" "),e._m(37),s("p",[e._v("Here is an example file:")]),e._v(" "),e._m(38),e._m(39),e._m(40),e._m(41),s("p",[e._v("Example file:")]),e._v(" "),e._m(42),e._m(43),e._m(44),e._m(45),e._m(46),s("p",[e._v("There is an easy way to add/delete files from particular s into CageFS. That can be done by using options in . Like:")]),e._v(" "),e._m(47),e._m(48),e._v(" "),s("p",[e._v("To exclude files and directories from CageFS, edit file:")]),e._v(" "),s("p",[e._v("And add files or directories in there, one per line.")]),e._v(" "),s("p",[e._v("Please do not edit /etc/cagefs/black.list file because it is replaced during the update of CageFS package.")]),e._v(" "),e._m(49),e._v(" "),e._m(50),e._v(" "),e._m(51),e._v(" "),s("p",[e._v("CageFS creates individual namespace for each user, making it impossible for users to see each other's files and creating high level of isolation. The way namespace is organized:")]),e._v(" "),e._m(52),e._v(" "),s("p",[e._v("a.        list of such directories is defined in /etc/cagefs/cagefs.mp\n3. directory for each user. Prefix is defined as last two digits of user id. User id is taken from /etc/passwd file.\n4.        Separate /etc directory is created and populated for each user inside\n5.        /tmp directory is mounted for each user separately into\n6.        Additional custom directories can be mounted for each user by defining them in /etc/cagefs/cagefs.mp\n7. You can define custom directories per user using "),s("router-link",{attrs:{to:"/per_user_virtual_mount_points/"}},[e._v("virt.mp")]),e._v(" files [CageFS 5.1 and higher]")],1),e._v(" "),s("p",[e._v("To define individual custom directories in /etc/cagefs/cagefs.mp following format is used:")]),e._v(" "),s("p",[e._v("This is useful when you need to give each user its own copy of a particular system directory, like:")]),e._v(" "),s("p",[e._v("Such entry would create separate for each user, with permissions set to 777")]),e._v(" "),s("p",[e._v("To modify mount points, edit /etc/cagefs/cagefs.mp. Here is an example of cagefs.mp:")]),e._v(" "),e._m(53),s("p",[e._v("If you want to change mount points, make sure you re-initialize mount points for all customers:")]),e._v(" "),e._m(54),s("p",[e._v("This command will kill all current processes and reset mount points.")]),e._v(" "),e._m(55),e._v(" "),e._m(56),e._v(" "),e._m(57),e._v(" "),s("p",[e._v("Starting with CageFS 5.1 you can specify additional directories to be mounted inside user's CageFS. This can be specified for each user.\nTo specify virtual mount points for a user, create a file:")]),e._v(" "),s("p",[e._v("Inside that file, you can specify mount points in the following format:")]),e._v(" "),e._m(58),e._m(59),e._v(" "),s("p",[e._v("Note that CageFS will automatically create those files for Plesk 10 & higher.")]),e._v(" "),s("p",[e._v("For example if we have plesk11.5 with two users , and :")]),e._v(" "),e._m(60),e._m(61),e._v(" "),e._m(62),s("p",[e._v("and file: _ /var/cagefs/01/cltest2/virt.mp:_")]),e._v(" "),e._m(63),e._m(64),e._v(" "),e._m(65),e._v(" "),s("p",[e._v("Sometimes you might need to make sure that directory containing all users would show up as containing just that user inside CageFS. For example, if you have directory structure like:")]),e._v(" "),e._m(66),s("p",[e._v("Then we can add the following line to /etc/cagefs/cagefs.mp file:")]),e._v(" "),e._m(67),s("p",[e._v("and execute:")]),e._v(" "),e._m(68),s("p",[e._v("After that each subdirectory of /home/httpd/fcgi-bin will be mounted for appropriate user in CageFS: will be mounted for and will be mounted for .")]),e._v(" "),e._m(69),e._v(" "),s("p",[e._v("CageFS 6.1-1 (and later) has improved mounting user’s home directory that is applied for users with home directories like (where = 0,1,..9).")]),e._v(" "),s("p",[e._v("In such case, earlier versions of CageFS always mount user’s home directory to and create symlink when needed, so user’s home directory can be accessed both via _ _ and . This quirk leads to some rare incompatibilities between CageFS and other software (for example OpenCart), because real path of user’s home directory in CageFS and in real file system can differ.")]),e._v(" "),s("p",[e._v("New CageFS mounts user’s home directory in a way that its real path in CageFS is always the same as in real file system. Additionally, CageFS searches for symlinks like\nand _ _ in real system and creates such symlinks in user’s CageFS when found.")]),e._v(" "),s("p",[e._v("This new mounting mode is enabled by default. You can switch to old mounting mode by executing the following commands:")]),e._v(" "),e._m(70),e._m(71),e._v(" "),s("p",[e._v("If you have a custom setup where home directories are in a special format, like: , you can specify it using regular expressions. This is needed by CageFS to create safe home space for end user, where no other users are visible.")]),e._v(" "),s("p",[e._v("We will create empty: , and then mount in that directory")]),e._v(" "),s("p",[e._v("To do that, create a file:")]),e._v(" "),s("p",[e._v("With content like:")]),e._v(" "),e._m(72),s("p",[e._v("If there is no such file, the home directory without last component will be considered as a base dir, like with\nwe would create , and then mount\nin there")]),e._v(" "),s("p",[e._v("WIth as a home dir, we would assume that is the base directory, and we would create and then we would mount -- which would cause each user to see empty base directories for other users, exposing user names.")]),e._v(" "),s("p",[e._v("When you want to share directory structure among multiple users, you can add following line at the top of the file. This is useful on the systems that support sites with multiple users, with different home directories inside main 'site' directory.")]),e._v(" "),e._m(73),s("p",[e._v("For example:")]),e._v(" "),s("p",[e._v("has home directory\nhas home directory\nsite admin has home directory")]),e._v(" "),s("p",[e._v("So, content of should be the following:")]),e._v(" "),e._m(74),s("p",[e._v("Directory structure in will be mounted in CageFS for appropriate users.\nEach user will have access to whole directory structure in (according to their permissions).")]),e._v(" "),e._m(75),e._v(" "),s("p",[e._v("CloudLinux 7:")]),e._v(" "),s("p",[e._v("CageFS works with any PostgreSQL version installed from CloudLinux or CentOS repositories. PostgreSQL packages fo CloudLinux 7 come from upstream (CentOS) unmodified. PostgreSQL’s socket is located in /var/run/postgresql directory. This directory is mounted to CageFS by default (in cagefs-5.5-6.34 or later).")]),e._v(" "),s("p",[e._v("When PostgreSQL has been installed after CageFS install, please add line:")]),e._v(" "),e._m(76),s("p",[e._v("tо /etc/cagefs/cagefs.mp file and then execute:")]),e._v(" "),e._m(77),s("p",[e._v("The steps above are enough to configure CageFS to work with PostgreSQL.")]),e._v(" "),s("p",[e._v("CloudLinux 6:")]),e._v(" "),s("p",[e._v("CageFS provides separate /tmp directory for each end user. Yet, PostgreSQL keeps its Unix domain socket inside server's main /tmp directory. In addition to that -- the location is hard coded inside PostgreSQL libraries.")]),e._v(" "),s("p",[e._v("To resolve the issue, CloudLinux provides version of PostgreSQL with modified start up script that can store PostgreSQL's socket in /var/run/postgres. The script automatically creates link from /tmp to that socket to prevent PostgreSQL dependent applications from breaking.")]),e._v(" "),s("p",[e._v("In addition to that, CageFS knows how to correctly link this socket inside end user's /tmp directory.")]),e._v(" "),s("p",[e._v("To enable PostgreSQL support in CageFS:")]),e._v(" "),e._m(78),e._v(" "),e._m(79),e._m(80),e._v(" "),e._m(81),s("p",[e._v("If you are using cPanel, you would also need to modify file: /etc/cron.daily/tmpwatch")]),e._v(" "),s("p",[e._v("And update line:")]),e._v(" "),e._m(82),s("p",[e._v("to:")]),e._v(" "),e._m(83),s("p",[e._v("to prevent symlink from being removed.")]),e._v(" "),e._m(84),e._v(" "),s("p",[e._v("CageFS depends on module tor PAM enabled services.When installed the module is automatically installed for following services:")]),e._v(" "),s("p",[e._v("·        sshd\n·        crond\n·        su")]),e._v(" "),s("p",[e._v("Following line is added to corresponding file in /etc/pam.d/:")]),e._v(" "),e._m(85),s("p",[e._v("Where 100 stands for minimum to put into , and 1 stands for CageFS enabled.")]),e._v(" "),e._m(86),e._v(" "),s("p",[e._v("Some software has to run outside CageFS to be able to complete its job. This includes such programs as etc.")]),e._v(" "),s("p",[e._v("CloudLInux uses technology to accomplish this goal. You can define any program to run outside CageFS, by specifying it in file. Do not edit existing as it will be overwritten with next CageFS update.")]),e._v(" "),s("p",[e._v("Once program is defined, run this command to populate the skeleton:")]),e._v(" "),e._m(87),s("p",[e._v("All the cPanel scripts located in that user might need to execute should be added to .")]),e._v(" "),s("p",[e._v("The syntax of _ _ files is as follows:")]),e._v(" "),e._m(88),e._v(" "),s("p",[e._v("Obligatory parameters are and _ _ .")]),e._v(" "),e._m(89),e._v(" "),s("p",[e._v("e - the name of a user on whose behalf will run in the real system. If is not specified, then will run on behalf the same user that is inside CageFS.")]),e._v(" "),e._m(90),e._v(" "),s("p",[e._v("Example of a simple command executed via :")]),e._v(" "),e._m(91),s("p",[e._v("Example of command execution with custom wrapper under (privilege escalation). The command uses two , that is why in the second line is specified instead of wrapper name.")]),e._v(" "),e._m(92),s("p",[e._v("Sometimes hosters may have users with non unique . Thus, may traverse users directory to find a specific one. That behavior turns into inappropriate if users directory is not cached locally (for example LDAP is in use).")]),e._v(" "),s("p",[e._v("To turn this feature off:")]),e._v(" "),e._m(93),s("p",[e._v("Or to activate it back:")]),e._v(" "),e._m(94),e._m(95),e._v(" "),e._m(96),e._v(" "),s("p",[e._v("To create custom file in /etc directory for end user, create a directory:")]),e._v(" "),s("p",[e._v("Put all custom files, and sub-directories into that direcotry.")]),e._v(" "),s("p",[e._v("For example, if you want to create custom /etc/hosts file for , create a directory:")]),e._v(" "),s("p",[e._v("Inside that directory, create a file hosts, with the content for that user.")]),e._v(" "),s("p",[e._v("After that execute:")]),e._v(" "),e._m(97),s("p",[e._v("If you are making changes for multiple users, you can run:")]),e._v(" "),e._m(98),s("p",[e._v("To remove custom file, remove it from directory, and re-run:")]),e._v(" "),e._m(99),e._m(100),e._v(" "),s("p",[e._v("Sometimes you might need to move from to another partition.")]),e._v(" "),s("p",[e._v("There are two ways:")]),e._v(" "),e._m(101),e._v(" "),e._m(102),e._m(103),e._v(" "),e._m(104),s("p",[e._v("On cPanel servers, if you place skeleton into directory, then you should configure the following option:")]),e._v(" "),e._m(105),e._v(" "),e._m(106),e._v(" "),s("p",[e._v("To move /var/cagefs to another location:")]),e._v(" "),e._m(107),s("p",[e._v('Verify that directory does not exist (if it exists - change name "cagefs.bak" to something else)')]),e._v(" "),e._m(108),s("p",[e._v("Verify that the following command gives empty output:")]),e._v(" "),e._m(109),s("p",[e._v("Then you can safely remove /var/cagefs.bak:")]),e._v(" "),e._m(110),e._m(111),e._v(" "),s("p",[e._v("CageFS makes sure that each user has his own directory, and that directory is the part of end-user's quota.")]),e._v(" "),s("p",[e._v("The actual location of the directory is")]),e._v(" "),s("p",[e._v("Once a day, using cron job, will clean up user's directory from all the files that haven't been accessed during 30 days.")]),e._v(" "),s("p",[e._v("This can be changed by running:")]),e._v(" "),e._m(112),s("p",[e._v("Where 720 is the number of hours that the file had to be inaccessible to be removed.")]),e._v(" "),s("p",[e._v("By default this is done at 03:37 AM, but you can also force the clean up outdated files that match 'chosen period' of all user's directories without waiting for a job to be launched by . Just run:")]),e._v(" "),e._m(113),s("p",[e._v("The following path will be cleaned as well:")]),e._v(" "),s("p",[e._v("(actual location _ _ )")]),e._v(" "),e._m(114),e._v(" "),s("p",[e._v("Create configuration file and specify directive as follows:")]),e._v(" "),s("p",[e._v("After that directories and _ _ inside CageFS  will be cleaned automatically.")]),e._v(" "),s("p",[e._v("Note that actual location of those directories in real file system is and .")]),e._v(" "),e._m(115),e._v(" "),s("p",[e._v("For cPanel servers, CageFS version 6.0-42 or higher performs cleaning of PHP sessions based on and directives specified in proper files.")]),e._v(" "),s("p",[e._v("directive default value is 1440 seconds. Those session files will be deleted, that were created or had metadata (ctime) changes more time ago than it is specified in")]),e._v(" "),s("p",[e._v("For versions value is normally .")]),e._v(" "),s("p",[e._v("This applies to the following versions (or later):")]),e._v(" "),s("p",[e._v("alt-php44-4.4.9-71;\nalt-php51-5.1.6-81;\nalt-php52-5.2.17-107;\nalt-php53-5.3.29-59;\nalt-php54-5.4.45-42;\nalt-php55-5.5.38-24;\nalt-php56-5.6.31-7;\nalt-php70-7.0.23-5;\nalt-php71-7.1.9-5;\nalt-php72-7.2.0-0.rc.2.2.")]),e._v(" "),s("p",[e._v("When using EasyApache 3, value is normally _ _ or . Seettings for EasyApache 3 are usualy taken from the file")]),e._v(" "),s("p",[e._v("When using EasyApache 4, value is normally where corresponds to PHP version.")]),e._v(" "),s("p",[e._v("Cleaning is started by cron , which starts the script twice within one hour.")]),e._v(" "),s("p",[e._v("The settings for ea-php are located in or in , where corresponds to the PHP version.")]),e._v(" "),s("p",[e._v("The settings for alt-php are located in _ _ files, where corresponds to PHP version.")]),e._v(" "),s("p",[e._v("The cleaning script cleans php sessions for all PHP versions ( and ) regardless of whether a version is used or selected via or . When different values are specified for the same (for different php versions), the cleaning script will use the least value for cleaning . So, it is recommended to specify different for each PHP version.")]),e._v(" "),s("p",[e._v("Users can define custom value of _ _ via PHP Selector in order to configure PHP's garbage collector, but that will not affect the script for cleaning PHP sessions. The script cleans PHP sessions based on global values of and directives taken from files mentioned above. Settings in custom users’ files are ignored.")]),e._v(" "),e._m(116),e._v(" "),s("p",[e._v("For Plesk servers, version 6.0-52 or higher is provided with a special cron job for removing obsolete PHP session files. Cleanup script runs once an hour (similar to how it is done in Plesk).")]),e._v(" "),s("p",[e._v("Each time the script runs, it performs the cleanup of the paths:")]),e._v(" "),e._m(117),e._v(" "),s("p",[e._v("The following features are applied during the cleanup:")]),e._v(" "),s("p",[e._v("all the users with higher than specified in are processed. Each user is processed independently from one another.")]),e._v(" "),s("p",[e._v("only directories inside are being cleaned. The paths of the same name in the physical  file system are not processed.")]),e._v(" "),s("p",[e._v("in all the detected directories, all the files with the names that correspond to mask are removed, the rest of the files are ignored.")]),e._v(" "),s("p",[e._v("the files older than specified lifetime are removed.")]),e._v(" "),s("p",[e._v("all non-fatal errors (lack of rights, missing directory) are ignored and do not affect the further work of the script.")]),e._v(" "),e._m(118),e._v(" "),s("p",[e._v("By default, should be available inside end user's . This is needed so that user's cronjobs and other things that user would get recorded in the system log files.")]),e._v(" "),s("p",[e._v("This is controlled using file with the following content:")]),e._v(" "),e._m(119),s("p",[e._v("To remove presence of inside CageFS, remove that file, and restart rsyslog service.")]),e._v(" "),e._m(120),e._v(" "),s("p",[e._v("By default, all mounts from the real file system is inherited by namespaces of all . So, destroying all may be required in order to unmount some mount in real file system completely. Otherwise, mount point remains busy after unmounting it in the real file system because this mount exists in namespaces of .")]),e._v(" "),s("p",[e._v("command saves all mounts from real file system as “default namespace” for later use in all . service executes command during startup.")]),e._v(" "),s("p",[e._v("In (and later) there is an ability to exclude specific mounts from namespaces for all .\nIn order to do so, please create a file with list of mounts to exclude (one mount per line) as regular expressions, and then execute :")]),e._v(" "),e._m(121),s("p",[e._v("After that, all new created will be without mount and without mounts that start with (like , etc). To apply changes to existing you should recreate :")]),e._v(" "),e._m(122),e._m(123),e._v(" "),s("p",[e._v("CageFS comes with a plugin for various control panels.")]),e._v(" "),s("p",[e._v("The plugin allows to:")]),e._v(" "),s("p",[e._v("·        Initialize CageFS;")]),e._v(" "),s("p",[e._v("·        Select "),s("router-link",{attrs:{to:"/managing_users/"}},[e._v("mode of operation")]),e._v(" ;")],1),e._v(" "),s("p",[e._v("·        See and modify the list of enabled/disabled users;")]),e._v(" "),s("p",[e._v("·        Update CageFS skeleton.")]),e._v(" "),e._m(124),e._v(" "),s("p",[e._v("CageFS plugin for cPanel is located in section of WHM.")]),e._v(" "),s("p",[e._v("It allows to initialize CageFS, select users CageFS will be enabled for, as well as update CageFS skeleton.")]),e._v(" "),e._m(125),e._v(" "),s("p",[e._v("To enable CageFS for a proper user (users), in choose a user from the list on the right ( users) and click . The user will move to the list on the left ( users).")]),e._v(" "),s("p",[e._v("To disable a user (users), choose a user from the list on the left ( users) and click . The user will move to the list on the right ( users).")]),e._v(" "),s("p",[e._v("To update CageFS Skeleton click .")]),e._v(" "),e._m(126),e._v(" "),e._m(127),e._v(" "),s("p",[e._v("CageFS comes with a plugin for Plesk 10.x. It allows initializing and updating CageFS template, as well as managing users and mode of operation for CageFS.")]),e._v(" "),s("p",[e._v("In modules section choose CageFS:")]),e._v(" "),e._m(128),e._v(" "),s("p",[e._v("To disable a user (users), choose a user from the list on the left ( users) and click . The user will move to the list on the right ( users).")]),e._v(" "),s("p",[e._v("To update click .")]),e._v(" "),e._m(129),e._v(" "),e._m(130),e._v(" "),s("p",[e._v("CageFS comes with plugin for to enable/disable CageFS on per user base. In edit user section chose tab. Mark checkbox and click to apply.")]),e._v(" "),e._m(131),e._v(" "),e._m(132)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"cagefs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cagefs","aria-hidden":"true"}},[this._v("#")]),this._v(" CageFS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ yum install cagefs\n$ /usr/sbin/cagefsctl --init\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ mkdir /home/cagefs-skeleton\n$ ln -s /home/cagefs-skeleton /usr/share/cagefs-skeleton\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"unistalling-cagefs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unistalling-cagefs","aria-hidden":"true"}},[this._v("#")]),this._v(" Unistalling CageFS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --remove-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ yum remove cagefs\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"managing-users"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#managing-users","aria-hidden":"true"}},[this._v("#")]),this._v(" Managing Users")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[t("pre",[t("code",[this._v("   Enabled for all, except those that are disabled.\n")])])]),this._v(" "),t("li",[t("pre",[t("code",[this._v("   Disabled for all, except those that are enabled.\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --enable-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --disable-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --toggle-mode\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --enable [username]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --disable [username]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --list-enabled\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --list-disabled\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --display-user-mode\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"command-line-tools"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command-line-tools","aria-hidden":"true"}},[this._v("#")]),this._v(" Command-line Tools")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"running-command-inside-cagefs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-command-inside-cagefs","aria-hidden":"true"}},[this._v("#")]),this._v(" Running Command Inside CageFS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('$ /bin/su - $USERNAME  -c "_command_"\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('$ /sbin/cagefs_enter_user $USERNAME "_command_"\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("You can forcibly disable start via for all users (regardless if CageFS is enabled or disabled) by specifying the parameter "),t("em",[this._v("cagefs_enter_proxied=0")]),this._v(" in "),t("em",[this._v("/etc/sysconfig/cloudlinux")]),this._v(" .")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("/bin/cagefs_enter.proxied")]),this._v(" can be executed instead of "),t("em",[this._v("/bin/cagefs_enter")]),this._v(" to enter CageFS without . Note that starting via is necessary to enable sending local notification messages to users with enabled CageFS. is executed via by default.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"sanity-check"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sanity-check","aria-hidden":"true"}},[this._v("#")]),this._v(" Sanity Check")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cagefsctl --sanity-check\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("Check cagefs users.enabled is directory")]),this._v(" - ensures that if exists, then it is a directory, not a file (if it is recognized as a file, then it would cause a breakdown).")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("Check cagefs users.disabled is directory")]),this._v(" - ensures that if exists, then it is a directory, not a file (if it is recognized as a file, then it would cause a breakdown).")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("Check cagefs disable.etcfs exists")]),this._v(" - checks if exists.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("Check cagefs users can enter cagefs")]),this._v(" - chooses two users in the system with enabled CageFS (the first and the second ones in the unsorted list) and tries to log in to CageFS under their credentials and see what happens. It runs and compares the output with the and command retcode estimation.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Note.")]),this._v(" "),t("em",[this._v("If log in fails, it can be on different reasons, that can only be determined in manual mode. The checker only gives the output of the command.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("p",[this._v("the check succeeded.")])]),this._v(" "),t("li",[t("p",[this._v("the check revealed a problem.")])]),this._v(" "),t("li",[t("p",[this._v("the check was skipped as it made no sense in such environment (e.g. wrong control panel) or can not be performed for some reason (e.g no users with enabled CageFS found). The actual result does not mean that a problem exists and can be considered as positive.")])]),this._v(" "),t("li",[t("p",[this._v("the check failed because of a problem inside the checker itself. Must be reported to the developers.")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"cagefs-quirks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cagefs-quirks","aria-hidden":"true"}},[this._v("#")]),this._v(" CageFS Quirks")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"file-system-templates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-system-templates","aria-hidden":"true"}},[this._v("#")]),this._v(" File System Templates")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# /usr/sbin/cagefsctl --init\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --update\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --update\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ /usr/sbin/cagefsctl --update\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("[openssh-clients]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("comment=OpenSSH Clients\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("paths=/etc/ssh/ssh_config, /bin/hostname, /usr/bin/scp, /usr/bin/sftp, /usr/bin/slogin, /usr/bin/ssh, /usr/bin/ssh-add, /usr/bin/ssh-agent, /usr/bin/ssh-copy-id, /usr/bin/.ssh.hmac, /usr/bin/ssh-keyscan, /usr/libexec/openssh/sftp-server, /etc/environment, /etc/security/pam_env.conf\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("devices=/dev/ptmx\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("[mail]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("comment=Mail tools\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("paths=/bin/mail, /etc/aliases.db, /etc/mail, /etc/mailcap, /etc/mail.rc, /etc/mime.types, /etc/pam.d/smtp.sendmail, /etc/rc.d/init.d/sendmail, /etc/smrsh, /etc/sysconfig/sendmail, /usr/bin/hoststat, /usr/bin/Mail, /usr/bin/mailq.sendmail, /usr/bin/makemap, /usr/bin/newaliases.sendmail, /usr/bin/purgestat, /usr/bin/rmail.sendmail, /usr/lib64/sasl2/Sendmail.conf, /usr/lib/mail.help, /usr/lib/mail.tildehelp, /usr/lib/sendmail.sendmail, /usr/sbin/mailstats, /usr/sbin/makemap, /usr/sbin/praliases, /usr/sbin/sendmail.sendmail, /usr/sbin/smrsh, /var/log/mail, /var/spool/clientmqueue, /var/spool/mqueue\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("users=smmsp\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("groups=smmsp\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --addrpm ffmpeg\n$ cagefsctl --update\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"excluding-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#excluding-files","aria-hidden":"true"}},[this._v("#")]),this._v(" Excluding Files")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"excluding-users"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#excluding-users","aria-hidden":"true"}},[this._v("#")]),this._v(" Excluding Users")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("To exclude users from CageFS, create a file (any name would work) inside _ _ "),t("code"),this._v(" folder, and list users that you would like to exclude from CageFS in that file.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"mount-points"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mount-points","aria-hidden":"true"}},[this._v("#")]),this._v(" Mount Points")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("with safe files is created")]),this._v(" "),t("li",[t("pre",[t("code",[this._v("   Any directory from the server that needs to be shared across all users is mounted into\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/var/lib/mysql\n/var/lib/dav\n/var/www/cgi-bin\n/var/spool\n/dev/pts\n/usr/local/apache/domlogs\n/proc\n/opt\n@/var/spool/cron,700\n@/var/run/screen,777\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --remount-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"per-user-virtual-mount-points"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#per-user-virtual-mount-points","aria-hidden":"true"}},[this._v("#")]),this._v(" Per user virtual mount points")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("[CageFS 5.1 and higher]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("_Please, see _")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("virtdir1,mask\n@subdir1,mask\n@subdir2,mask\nvirdir2,mask\n@subdir3,mask\n@subdir4,mask\n>virtdir3,mask\n@subdir5,mask\n@subdir6,mask\n# comments\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("is always optional, if missing 0755 is used\nCreate virtual directory , mount it to:\n"),s("code",[e._v("o")]),e._v(" "),s("code",[e._v("o")]),e._v(" inside virtual directory, create directories\n"),s("code",[e._v("o")]),e._v(" mount to\n"),s("code",[e._v("o")]),e._v(" if is started with >, create directory , but don't mount it into . This is needed for cases when is inside home base dir.\nif file /var/cagefs/[prefix]/[user]/virt.mp is missing -- no virt directories are loaded for that user.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cltest1 uid 10000 has domains: cltest1.com, cltest1-addon.com and sub1.cltest1.com\ncltest2 uid 10001 has domains: cltest2.com, cltest2-addon.com\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("In such case we would have file "),t("em",[this._v("/var/cagefs/00/cltest1/virt.mp")]),this._v(" :")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v(">/var/www/vhosts/system,0755\n@cltest1-addon.com,0755\n@cltest1.com,0755\n\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v(">/var/www/vhosts/system\n@cltest2-addon.com\n\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"split-by-username"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#split-by-username","aria-hidden":"true"}},[this._v("#")]),this._v(" Split by Username")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("[CageFS 5.3.1+]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/home/httpd/fcgi-bin/user1\n/home/httpd/fcgi-bin/user2\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("%/home/httpd/fcgi-bin\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cagefsctl --remount-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"mounting-user’s-home-directory-inside-cagefs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mounting-user’s-home-directory-inside-cagefs","aria-hidden":"true"}},[this._v("#")]),this._v(" Mounting user’s home directory inside CageFS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# touch /etc/cagefs/disable.home.dirs.search\n# cagefsctl --force-update\n# cagefsctl --remount-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"base-home-directory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base-home-directory","aria-hidden":"true"}},[this._v("#")]),this._v(" Base Home Directory")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("^/home/\n^/var/www/users/\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mount_basedir=1\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mount_basedir=1\n^/var/www/vhosts/[^/]+\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"postgresql-support"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-support","aria-hidden":"true"}},[this._v("#")]),this._v(" PostgreSQL support")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/var/run/postgresql\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cagefsctl --remount-all \n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[t("pre",[t("code",[this._v("   Make sure you have updated to latest version of PostgreSQL.\n")])])]),this._v(" "),t("li",[t("pre",[t("code",[this._v("   Edit file /etc/sysconfig/postgres, and uncomment line.\n")])])]),this._v(" "),t("li",[t("p",[this._v("Update CageFS configuration by running:")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cagefsctl  --reconfigure-cagefs\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"4"}},[t("li",[this._v("Restart PostgreSQL by running:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ service postgresql restart \n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("flags=-umc \n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("flags=-umcl\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"pam-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pam-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" PAM Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("session    required     pam_lve.so      100     1\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"executing-by-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#executing-by-proxy","aria-hidden":"true"}},[this._v("#")]),this._v(" Executing By Proxy")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --update\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("ALIAS:wrapper_name=username:path_to_executable")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("p",[this._v("any name which is unique within all files;")])]),this._v(" "),t("li",[t("p",[this._v("the name of wrapper file, which is used as a replacement for executable file . Wrapper files are located in . If wrapper name is not specified, then default wrapper is used. Also, a reserved word can be used, it will intend that wrapper is not in use (installed before) - applied for the commands with several , as in the example below.")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("the path to executable file which will run via .")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("SENDMAIL=/usr/sbin/sendmail\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("CRONTAB_LIST:cagefs.proxy.crontab=root:/usr/bin/crontab\nCRONTAB_SAVE:noproceed=root:/usr/bin/crontab\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("touch /etc/cagefs/proxy.disable.duid\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rm /etc/cagefs/proxy.disable.duid\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"custom-etc-files-per-customer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#custom-etc-files-per-customer","aria-hidden":"true"}},[this._v("#")]),this._v(" Custom /etc files per customer")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("[4.0-5 and later]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --update-etc USER1\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --update-etc\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --update-etc\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"moving-cagefs-skeleton-directory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#moving-cagefs-skeleton-directory","aria-hidden":"true"}},[this._v("#")]),this._v(" Moving cagefs-skeleton directory")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("If is not created yet ( wasn't executed), then execute:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ mkdir /home/cagefs-skeleton \n$ ln -s /home/cagefs-skeleton /usr/share/cagefs-skeleton \n$ cagefsctl --init\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("If already exists:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('$ cagefsctl --disable-cagefs \n$ cagefsctl --unmount-all\n# To ensure that the following command prints empty output: \n$ cat /proc/mounts | grep cagefs \n# if you see any cagefs entries, execute "cagefsctl --unmount-all" again.\n$ mv /usr/share/cagefs-skeleton /home/cagefs-skeleton \n$ ln -s /home/cagefs-skeleton /usr/share/cagefs-skeleton\ncagefsctl --enable-cagefs\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("In "),t("em",[this._v("cPanel WHM")]),this._v(" choose and go to , then in change default _ _ value to (not ).")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"moving-var-cagefs-directory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#moving-var-cagefs-directory","aria-hidden":"true"}},[this._v("#")]),this._v(" Moving /var/cagefs directory")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --disable-cagefs\n$ cagefsctl --unmount-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cp -rp /var/cagefs /new/path/cagefs\n$ mv /var/cagefs /var/cagefs.bak\n$ ln -s /new/path/cagefs /var/cagefs\n$ cagefsctl --enable-cagefs\n$ cagefsctl --remount-all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cat /proc/mounts | grep cagefs.bak\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ rm -rf /var/cagefs.bak\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"tmp-directories"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tmp-directories","aria-hidden":"true"}},[this._v("#")]),this._v(" TMP Directories")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --set-tmpwatch='/usr/sbin/tmpwatch -umclq 720'\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cagefsctl --tmpwatch\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("You can configure "),t("code"),this._v(" to clean custom directories inside .")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Cleanup of PHP sessions")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Cleanup of PHP session files in Plesk")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[t("p",[this._v("set by directive in files. If is missing, then is used. Session files lifetime is set by directive. If it is not found, then 1440 seconds value is used (24 minutes, as in Plesk). Lifetime set in the file is only taken into consideration if it is longer than 1440 seconds, otherwise 1440 seconds is used. All the installed versions are processed.")])]),this._v(" "),t("li",[t("p",[this._v(". Files lifetime is only defined by Plesk script . If the script is missing or returns errors, then this directory is not processed.")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"syslog"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#syslog","aria-hidden":"true"}},[this._v("#")]),this._v(" Syslog")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$AddUnixListenSocket /usr/share/cagefs-skeleton/dev/log\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"excluding-mount-points"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#excluding-mount-points","aria-hidden":"true"}},[this._v("#")]),this._v(" Excluding mount points")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# cat /etc/container/exclude_mounts.conf    \n^/dir1/\n^/dir2$\n# lvectl start\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# lvectl destroy all   \n# lvectl apply all\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"control-panel-integration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#control-panel-integration","aria-hidden":"true"}},[this._v("#")]),this._v(" Control Panel Integration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"cpanel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpanel","aria-hidden":"true"}},[this._v("#")]),this._v(" cPanel")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"/images/_img1_zoom73.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"/images/_img2_zoom71.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"plesk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plesk","aria-hidden":"true"}},[this._v("#")]),this._v(" Plesk")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"/images/plesk_cagefs_icon.png",alt:""}}),this._v("\nTo enable CageFS for a proper user (users), in choose a user from the list on the right ( users) and click . The user will move to the list on the left ( users).")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"/images/plesk_cagefs_manager_disable_all.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"ispmanager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ispmanager","aria-hidden":"true"}},[this._v("#")]),this._v(" ISPManager")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"/images/ispmanager_cagefs_user_zoom98.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Or you can manage global CageFS settings via CageFS menu\n"),t("img",{attrs:{src:"/images/_img3.jpg",alt:""}})])}],!1,null,null,null);i.options.__file="README.md";t.default=i.exports}}]);